<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>Friend Finder</title>

        <!-- Link to Bootstrap CDN -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <!-- Link to Bootstrap Javascript CDN -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <!-- Link to jQuery CDN -->
        <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    </head>

    <body>
        <div class="container">
                <h2>Survey Questions</h2>
                <hr>
            
                <h3><strong>About You</strong></h3>
                <h4>Name (Required)</h4>
                <input type="text" id="name" class="form-control" required>
            
                <h4>Link to Photo Image (Required)</h4>
                <input type="text" id="photo" class="form-control" required>
            
                <hr>
                <hr>
                <h3>Question 1</h3>
                <h4>You get upset easily.</h4>
                <select class="chosen-select" id="question1">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
                <h3>Question 2</h3>
                <h4>You have been known to talk a lot.</h4>
                <select class="chosen-select" id="question2">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
                <h3>Question 3</h3>
                <h4>When you go out, you have to drink beer, wine, spirits, or hard liquor.</h4>
                <select class="chosen-select" id="question3">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
                <h3>Question 4</h3>
                <h4>You use foul language, even when you aren't upset.</h4>
                <select class="chosen-select" id="question4">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
                <h3>Question 5</h3>
                <h4>Best way to cook a meal is using a microwave.</h4>
                <select class="chosen-select" id="question5">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
                <h3>Question 6</h3>
                <h4>You would break the law, if you would never get caught.</h4>
                <select class="chosen-select" id="question6">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
                <h3>Question 7</h3>
                <h4>Social media is a big part of your life.</h4>
                <select class="chosen-select" id="question7">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
                <h3>Question 8</h3>
                <h4>Your friend is sick, you bring them medicine..</h4>
                <select class="chosen-select" id="question8">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
                <h3>Question 9</h3>
                <h4>In your opinion, good friends are easy to find.</h4>
                <select class="chosen-select" id="question9">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
                <h3>Question 10</h3>
                <h4>You keep secrets from your friends.</h4>
                <select class="chosen-select" id="question10">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
                <hr>
                <br>
                <button type="button" class="btn btn-primary" id="submit"><strong>SUBMIT</strong></button>   
            <hr>
            <footer>
                <div class="container">
                    <p><a href="/api/friends">API Friends | <a href="https://github.com/Rnulanz/FriendFinder_App.git">Git Hub</a></p>
                </div>
            </footer>
        </div>
        <div id="resultsModal" class="modal fade" role="dialog">
                <div class="modal-dialog">
        
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">Ã—</button>
                            <h2 class="modal-title"><strong>Best Match</strong></h2>
                        </div>
                        <div class="modal-body">
                            <h2 id="matchName"></h2>
                            <img id="matchImg" style="max-width:500px;max-height:500px;" src="http://daveholmesparty.com/wp-content/uploads/2016/02/9780804187985-r-1000x1000.jpg"
                                alt="Placeholder if an image doesn't show">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
        
                </div>
                <footer class="footer">
                    <div class="container">
                        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/Rnulanz/FriendFinder_App.git">GitHub
                                Repo</a></p>
                    </div>
                </footer>
            </div>

<script type="text/javascript">

$("#submit").on("click", function(event){
    event.preventDefault();

//Form Validation
function validateFunction(){
    var isValid = true;
    $(".form-control").each(function(){
        if($(this).val() === ""){
            isValid = false;
        }
    });
    $(".chosen-select").each(function(){
        if($(this).val() === ""){
            isValid = false;
        }
    });
    return isValid
}
if(validateFunction() === true){
    // Create an object for user data
    
    var userData = {
        name: $('#name').val().trim(),
        photo: $('#photo').val().trim(),
        score: [
            $('#question1').val(),
            $('#question2').val(),
            $('#question3').val(),
            $('#question4').val(),
            $('#question5').val(),
            $('#question6').val(),
            $('#question7').val(),
            $('#question8').val(),
            $('#question9').val(),
            $('#question10').val(),
        ]
    }
var currentUrl = window.location.origin;
$.post(currentUrl + "/api/friends", userData, function(data){
    if(data){
    // Grab the result from the AJAX post so that the best match's name and photo are displayed.
    $("#matchName").text(data.name);
    $("#matchImg").attr("src", data.photo);
    $("#resultsModal").modal("toggle")
}
});

        $("#name").val("");
        $("#photo").val("");
        $("#question1").val("");
        $("#question2").val("");
        $("#question3").val("");
        $("#question4").val("");
        $("#question5").val("");
        $("#question6").val("");
        $("#question7").val("");
        $("#question8").val("");
        $("#question9").val("");
        $("#question10").val("");

}else {
    alert("Please fill out all fields before submitting!");
    }
})
        </script>
    </body>
</html>